# 参数修改约规  
## 本文为说明参数的修改事项以及审核规则.  
### 修订日期 2023/03/18  
</br>

## Pull Request
> 所有的Pull Request都**必须**填写Subject和Message
> 不遵守此约规则直接关闭Pull Request
- 通常情况下, 每个Pull Request仅针对**单个地图**, 但是可以同时包含多个文件
- **同一个事件的Commit**都应该放到**同一个Pull Request**中, 而不是每个Commit都开启一个Pull Request
- `Subject` 通常为针对的改动, 即一句话概括你干了什么 *例如: 修改威尼斯通关云点*
- `Message` 需要填写你为什么需要改动这些, 理由是什么
- 发起Pull Request之前, 应该先合并/同步上游分支
</br></br>
  
## 地图说明
> 这里是地图的分类
- **长征图**: 指的是单回合需要耗时`12`分钟以上且通关率低于`30%`的地图 *例如: 舞台剧*
- **对抗图**: 指的是人类与僵尸的`神器博弈` *例如: 上古卷轴*
- **娱乐图**: 指的是`偏向娱乐`玩法的地图 *例如: 捡币/爬雪山*
- **普通图**: 指的是各项方面`较为中庸`的地图 *例如: 时雨*
- **咸鱼图**: 指的是`躺着有手就能过`的地图 *例如: 西瓜橘子/威尼斯*
</br>
  
## 基本规则
> 违反规则将会被拒绝
- **禁止** 一切以`活动为由`的参数修改
- **禁止** 一切所谓的`临时`参数修改
- **禁止** `击退高爆手雷`在*非*`长征图`以外使用
- **禁止** 修改`僵尸血量`时母体与普通僵尸使用同一数值
- **禁止** `MCR/VIP` 延长次数超过3次
- **禁止** `地图时间` 超过*45*分钟
- **禁止** 设置地图难度等级**不相匹配**的奖励`云点`/`积分` *例如 西瓜橘子s3为8云点/5积分*
- **禁止** 关闭`任意僵尸技能`, 已知BUG除外
- **禁止** 在**没有**`数据支持`的情况下根据自己的理解修改参数
- **禁止** 在更新地图版本时, 直接修改文件名, 应创建新的文件副本
- **守则** 在僵尸技能过于强势时, 应优先`增强人类`, 而`非`削弱僵尸 *例如 风神器下削弱钩子到200码*
- **守则** 除已知地图BUG可能导致卡住外, 不允许打开人类`ztele`
- **守则** 拥有皮肤的地图通常情况下需要打开`随机尸变`模式
- **守则** 在跳刀地图通常需要打开`神器透明化`
- **守则** 在弹幕地图通常需要关闭`第三人称`视角
- **守则** 在拥有神器等级的地图通常需要打开`地图分数保存`
- **守则** 不影响玩法的前提下不应**禁止**购买`黑洞雷`
- **守则** 不影响玩法的前提下不应**禁止**购买`大狙`
- **建议** 对于帧数较低或大场景的地图, 关闭`按钮高亮鸡`
- **建议** 娱乐图`不应设置`神器门槛, 长征图可`适当提高`神器门槛
</br></br>
  
## 平衡相关
> 平衡时请参考以下优先级
- 摔落伤害倍率
- 开局获得金钱
- 初始手雷数量
- 金钱转换效率
- 血针开放购买
- 大狙购买数量
- 手雷购买上限
- 僵尸技能参数
- 高爆燃烧时长
- 高爆手雷模式
- 地图击退倍率
- 僵尸连跳地速
- 僵尸血量上限
- 母体尸变比例
- 母体原地尸变
- 僵尸技能开关  
##### **对于神器对抗类的地图,优先增强弱势一方,而不是简单的对强势的一方进行削弱**  
*例如FF或TESV地图, 应该考虑增强僵尸, 而不是单纯的删除人类手雷*
</br></br>
  
## `MapData`
- 除`娱乐图`以外禁止地图CD降低至`100`一下
- 预订地图价格不得低于`100`积分
- 包场地图价格一般为预订价格的`30-50倍`
- 对于`跳刀``弹幕`等阴间对萌新不友好地图应设置时间段区分且需要预定
- 对于文件大于`150MB`大图, 通常设置为`600`以上CD`3000`以上订图价格且需要预定
</br></br>
  
## `Stripper` / `Console_T` / `GameText_T` 内输出参数
> 允许使用的命令/参数
- `sm_countdown_clear` - *清除当前所有倒计时*
- `sm_precache_particles` - *加载指定的pcf manifest 仅允许在回合开始时,地图加载时使用*
- `boss_trigger_end` - *强行中断当前BOSS战并结算*
- `Map-Configs` 中所有的参数 
> 这里是禁止事项
- 禁止使用`zr_*`
- 禁止使用`sm_*`
> 建议
- 在分关的地图上, 推荐根据不同的关卡在stripper或翻译文件内修改通关`积分`/`云点` 
</br></br>
  
## BossHP
- 在分阶段的Boss上, 务必使用`multiparts`参数
- 对于类似ShroomForest3中的骷髅士兵/蜘蛛, 应归类为`monster`, 而**不是Boss**
- 对于使用`VScirpt`运算的Boss, 应使用`fys_global_counter`进行relay.
</br></br>
  
## entWatch
- 对于`皮肤类`神器, 必须关闭`glow`以及`autotransfer`参数
- 对于拾取`匕首`方可获取的神器, 必须设置`triggerid`
- 对于一次性`道具类`神器, 通常关闭`hud` *例如 minas中的马桶等*
- 对于`土`/`墙`等可能会卡住*人类*或*僵尸*的神器, 必须设置`isWall`
> 额外的命令
- `entwatch_override_mode_by_weapon` - *覆盖本回合该神器的模式* **参数: {weapon entity index} {mode}**
- `entwatch_override_maxuses_by_weapon` - *覆盖本回合该神器的模式* **参数: {weapon entity index} {maxuses}**
- `entwatch_override_cooldown_by_weapon` - *覆盖本回合该神器的模式* **参数: {weapon entity index} {cooldown}**
- `entwatch_override_mode_by_id` - *覆盖本回合该神器的模式* **参数: {hammer id} {mode}**
- `entwatch_override_maxuses_by_id` - *覆盖本回合该神器的模式* **参数: {hammer id} {maxuses}**
- `entwatch_override_cooldown_by_id` - *覆盖本回合该神器的模式* **参数: {hammer id} {cooldown}**
</br></br>
  
## Console_T
- 对于可能误判为`倒计时的数字`, 使用中文或序号代替 *例如 船①*
</br></br>
  
## Map-Configs
- 使用`zr_classes_modify`时, 仅允许修改`health`字段, 最低数值不得低于`1500`
  > 可用class
  + `动力小子`, `摩拉克斯`, `漫游枪手`, `飞虎神鹰`, `美国大兵`
  + `闪灵僵尸`, `唾沫僵尸`, `加速僵尸`, `抬棺僵尸`, `普通僵尸`
  + `母体僵尸`
</br></br>

## 新增地图流程
- `地图文本` 如果有则须要生成翻译文件并翻译
- `地图神器` 如果有则须要编写entWatch配置文件
- `地图分关` 如果有则须要编写分关配置文件
- `BossNPC` 如果有则须要编写BossHP配置文件 *脚本Boss/NPC则需要修改脚本并注入relay*
- `地图核爆` 如果有则须要编写核爆Trigger配置文件 *脚本处死则忽略*
- `地图参数` 根据测试流程的难易度决定具体参数 *不可将开荒参数设置得过于简单*
- `MapData` 部署地图必须要编写正确的MapData, 否则无法定图
</br></br>
  
## 文件编辑
> 请先设置好你的编辑器, 首推Visual Studio Code
- **禁止** 使用任何`中文标点`以及[`/`], [`\`], [`"`]
- **禁止** 使用换行
- **守则** 文件编码使用`UTF-8无BOM`
- **守则** 文件换行符使用`LF`
- **守则** 文件缩进使用`Space: 4` 
</br></br>
  
## 推送说明
- Pull Request合并后会立即推送到服务器, 若为当前地图, 则除`Map-Configs`外都立即生效
- 因GitHub限制, 同一个文件推送之后会有`5~10分钟`缓存期, 期间内修改文件/PR都不会生效.
</br></br>
  
## 合并说明
- **审核人员应严格执行本约规标准进行审核, 一旦发生因不遵守约规引起的问题, 追责到人**.
- 在Pull Request合并之后, 应该`删除本地分支`或`重新同步上游分支`.
